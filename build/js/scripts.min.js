"use strict";var ESC_KEYCODE=27,ENTER_KEYCODE=13,isStorageSupport=!0,storage=localStorage.getItem("name");try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}var popup=document.querySelector(".request"),popupOpen=document.querySelector(".top-line__call"),popupClose=document.querySelector(".request__close"),form=popup.querySelector("form"),name=popup.querySelector("[name=modal-name]"),number=popup.querySelector("[name=modal-phone]"),openPopup=function(){popup.classList.add("request--show"),storage?(name.value=storage,number.focus()):name.focus(),document.addEventListener("keydown",onPopupEscPress)},closePopup=function(){popup.classList.remove("request--show"),popup.classList.remove("request-error"),document.removeEventListener("keydown",onPopupEscPress)},onPopupEscPress=function(e){e.keyCode===ESC_KEYCODE&&closePopup()};popupOpen.addEventListener("click",function(e){e.preventDefault(),openPopup()}),popupOpen.addEventListener("keydown",function(e){e.keyCode===ENTER_KEYCODE&&openPopup()}),popupClose.addEventListener("click",function(e){e.preventDefault(),closePopup()}),popupClose.addEventListener("keydown",function(e){e.keyCode===ENTER_KEYCODE&&closePopup()}),form.addEventListener("submit",function(e){name.value&&number.value?isStorageSupport&&localStorage.setItem("name",name.value):(e.preventDefault(),popup.classList.add("request--error"))});var testLine=document.querySelector(".test__line"),testIndicator=testLine.querySelector(".test__indicator"),questionNow=testLine.querySelector(".test__now"),questionAll=testLine.querySelector(".test__all"),allQuestions=document.querySelectorAll(".test__item"),k=allQuestions.length;questionAll.textContent=k;for(var i=1;i<allQuestions.length;i++)allQuestions[i].classList.add("visually-hidden");var getQuestion=function(){for(var e=0,t=0;t<allQuestions.length&&0==e;t++)allQuestions[t].classList.contains("test__item--active")&&(e=t+1);return e},writeQuestion=function(){var e=getQuestion();questionNow.textContent=e},moveIndicator=function(){var e;e=getQuestion(),testIndicator.style.width=100*e/k+"%"};moveIndicator();var quizNav=document.querySelector(".quiz__nav"),prevButton=quizNav.querySelector(".quiz__prev"),nextButton=quizNav.querySelector(".quiz__next"),completeButton=quizNav.querySelector(".quiz__complete"),quizForm=document.querySelector(".test__call");1==k&&(nextButton.style.display="none",completeButton.style.display="inline-block"),nextButton.addEventListener("click",function(){var e=getQuestion();allQuestions[e-1].classList.remove("test__item--active"),allQuestions[e-1].classList.add("visually-hidden"),allQuestions[e].classList.add("test__item--active"),allQuestions[e].classList.remove("visually-hidden"),writeQuestion(),moveIndicator(),1==e&&(prevButton.style.display="inline-block"),e==k-1&&(nextButton.style.display="none",completeButton.style.display="inline-block")}),prevButton.addEventListener("click",function(){var e=getQuestion();allQuestions[e-1].classList.remove("test__item--active"),allQuestions[e-1].classList.add("visually-hidden"),allQuestions[e-2].classList.add("test__item--active"),allQuestions[e-2].classList.remove("visually-hidden"),writeQuestion(),moveIndicator(),2==e&&(prevButton.style.display="none"),e==k&&(nextButton.style.display="inline-block",completeButton.style.display="none")}),completeButton.addEventListener("click",function(){document.querySelector(".test__list").style.display="none",quizForm.style.display="block",prevButton.style.display="none",completeButton.style.display="none"});var carusel=document.querySelector(".reviews__list"),caruselNav=document.querySelectorAll(".navigation__item"),caruselList=document.querySelectorAll(".reviews__item"),navigation=document.querySelector(".navigation"),findActive=function(){for(var e=-1,t=0;t<caruselList.length&&-1==e;t++)caruselList[t].classList.contains("reviews__item--active")&&(e=t);return console.log("Нашел активный элемент:",e),e};carusel.addEventListener("click",function(e){var t=e.target;if("reviews__play"==t.className){var o=t.parentNode.querySelector("video");o.play(),o.setAttribute("controls",""),t.style.display="none"}});